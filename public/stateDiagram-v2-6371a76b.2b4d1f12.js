!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(t,e,i,r,a){/* eslint-disable no-undef */var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof n[r]&&n[r],d=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function o(e,i){if(!d[e]){if(!t[e]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var a="function"==typeof n[r]&&n[r];if(!i&&a)return a(e,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(s)return s(e,!0);// Try the node require function if it exists.
if(l&&"string"==typeof e)return l(e);var c=Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}g.resolve=function(i){var r=t[e][1][i];return null!=r?r:i},g.cache={};var p=d[e]=new o.Module(e);t[e][0].call(p.exports,g,p,p.exports,this)}return d[e].exports;function g(t){var e=g.resolve(t);return!1===e?{}:o(e)}}o.isParcelRequire=!0,o.Module=function(t){this.id=t,this.bundle=o,this.exports={}},o.modules=t,o.cache=d,o.parent=s,o.register=function(e,i){t[e]=[function(t,e){e.exports=i},{}]},Object.defineProperty(o,"root",{get:function(){return n[r]}}),n[r]=o;for(var c=0;c<e.length;c++)o(e[c]);if(i){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var p=o(i);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):a&&(this[a]=p)}}({"9WmCf":[function(t,e,i){var r=t("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(i),r.export(i,"diagram",()=>P);var a=t("./styles-fa41df25.js"),n=t("dagre-d3-es/src/graphlib/index.js"),s=t("d3"),d=t("./mermaid-b0ad2de1.js"),l=t("./index-a92ac404.js");t("ts-dedent"),t("dayjs"),t("@braintree/sanitize-url"),t("dompurify"),t("khroma"),t("lodash-es/memoize.js"),t("stylis"),t("lodash-es/isEmpty.js"),t("dagre-d3-es/src/dagre/index.js"),t("dagre-d3-es/src/graphlib/json.js"),t("./edges-49ac43a2.js"),t("./createText-3df630b5.js"),t("mdast-util-from-markdown"),t("./svgDraw-0fcc813d.js");let o="rect",c="rectWithTitle",p="statediagram",g=`${p}-state`,h="transition",u=`${h} note-edge`,f=`${p}-note`,x=`${p}-cluster`,y=`${p}-cluster-alt`,b="parent",m="note",w="----",T=`${w}${m}`,j=`${w}${b}`,v="fill:none",k="fill: #333",B="text",N="normal",E={},S=0;function $(t="",e=0,i="",r=w){let a=null!==i&&i.length>0?`${r}${i}`:"";return`state-${t}${a}-${e}`}let D=(t,e,i,r,n,s)=>{var l;let p=i.id,h=null==(l=r[p])?"":l.classes?l.classes.join(" "):"";if("root"!==p){let e=o;!0===i.start&&(e="start"),!1===i.start&&(e="end"),i.type!==a.D&&(e=i.type),E[p]||(E[p]={id:p,shape:e,description:(0,d.e).sanitizeText(p,(0,d.c)()),classes:`${h} ${g}`});let r=E[p];i.description&&(Array.isArray(r.description)?(r.shape=c,r.description.push(i.description)):r.description.length>0?(r.shape=c,r.description===p?r.description=[i.description]:r.description=[r.description,i.description]):(r.shape=o,r.description=i.description),r.description=(0,d.e).sanitizeTextOrArray(r.description,(0,d.c)())),1===r.description.length&&r.shape===c&&(r.shape=o),!r.type&&i.doc&&((0,d.l).info("Setting cluster for ",p,O(i)),r.type="group",r.dir=O(i),r.shape=i.type===a.a?"divider":"roundedWithTitle",r.classes=r.classes+" "+x+" "+(s?y:""));let n={labelStyle:"",shape:r.shape,labelText:r.description,// typeof newNode.description === 'object'
//   ? newNode.description[0]
//   : newNode.description,
classes:r.classes,style:"",//styles.style,
id:p,dir:r.dir,domId:$(p,S),type:r.type,padding:15};if(n.centerLabel=!0,i.note){let e={labelStyle:"",shape:"note",labelText:i.note.text,classes:f,// useHtmlLabels: false,
style:"",// styles.style,
id:p+T+"-"+S,domId:$(p,S,m),type:r.type,padding:15},a={labelStyle:"",shape:"noteGroup",labelText:i.note.text,classes:r.classes,style:"",// styles.style,
id:p+j,domId:$(p,S,b),type:"group",padding:0};S++;let s=p+j;t.setNode(s,a),t.setNode(e.id,e),t.setNode(p,n),t.setParent(p,s),t.setParent(e.id,s);let d=p,l=e.id;"left of"===i.note.position&&(d=e.id,l=p),t.setEdge(d,l,{arrowhead:"none",arrowType:"",style:v,labelStyle:"",classes:u,arrowheadStyle:k,labelpos:"c",labelType:B,thickness:N})}else t.setNode(p,n)}e&&"root"!==e.id&&((0,d.l).trace("Setting node ",p," to be child of its parent ",e.id),t.setParent(p,e.id)),i.doc&&((0,d.l).trace("Adding nodes children "),M(t,i,i.doc,r,n,!s))},M=(t,e,i,r,n,s)=>{(0,d.l).trace("items",i),i.forEach(i=>{switch(i.stmt){case a.b:case a.D:D(t,e,i,r,n,s);break;case a.S:{D(t,e,i.state1,r,n,s),D(t,e,i.state2,r,n,s);let a={id:"edge"+S,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:v,labelStyle:"",label:(0,d.e).sanitizeText(i.description,(0,d.c)()),arrowheadStyle:k,labelpos:"c",labelType:B,thickness:N,classes:h};t.setEdge(i.state1.id,i.state2.id,a,S),S++}}})},O=(t,e=a.c)=>{let i=e;if(t.doc)for(let e=0;e<t.doc.length;e++){let r=t.doc[e];"dir"===r.stmt&&(i=r.value)}return i},A=async function(t,e,i,r){let a;(0,d.l).info("Drawing state diagram (v2)",e),E={},r.db.getDirection();let{securityLevel:c,state:g}=(0,d.c)(),h=g.nodeSpacing||50,u=g.rankSpacing||50;(0,d.l).info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),(0,d.l).info(r.db.getRootDocV2());let f=r.db.getStates(),x=new n.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:O(r.db.getRootDocV2()),nodesep:h,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});D(x,void 0,r.db.getRootDocV2(),f,r.db,!0),"sandbox"===c&&(a=(0,s.select)("#i"+e));let y="sandbox"===c?(0,s.select)(a.nodes()[0].contentDocument.body):(0,s.select)("body"),b=y.select(`[id="${e}"]`),m=y.select("#"+e+" g");await (0,l.r)(m,x,["barb"],p,e),(0,d.u).insertTitle(b,"statediagramTitleText",g.titleTopMargin,r.db.getDiagramTitle());let w=b.node().getBBox(),T=w.width+16,j=w.height+16;b.attr("class",p);let v=b.node().getBBox();(0,d.i)(b,j,T,g.useMaxWidth);let k=`${v.x-8} ${v.y-8} ${T} ${j}`;(0,d.l).debug(`viewBox ${k}`),b.attr("viewBox",k);let B=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let t of B){let e=t.getBBox(),i=document.createElementNS("http://www.w3.org/2000/svg",o);i.setAttribute("rx",0),i.setAttribute("ry",0),i.setAttribute("width",e.width),i.setAttribute("height",e.height),t.insertBefore(i,t.firstChild)}},P={parser:a.p,db:a.d,renderer:{setConf:function(t){let e=Object.keys(t);for(let i of e)t[i]},getClasses:function(t,e){(0,d.l).trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(t){return t}},draw:A},styles:a.s,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,(0,a.d).clear()}}},{"./styles-fa41df25.js":"i5tjy","dagre-d3-es/src/graphlib/index.js":"j6NXy",d3:"ahWNw","./mermaid-b0ad2de1.js":"42V0c","./index-a92ac404.js":"39ufq","ts-dedent":"azOLv",dayjs:"8F3kd","@braintree/sanitize-url":"eIPUt",dompurify:"5cPaM",khroma:"kb6Zw","lodash-es/memoize.js":"kSZfU",stylis:"lfeQC","lodash-es/isEmpty.js":"941eg","dagre-d3-es/src/dagre/index.js":"9xp7T","dagre-d3-es/src/graphlib/json.js":"5pdrN","./edges-49ac43a2.js":"ayTP7","./createText-3df630b5.js":"590AZ","mdast-util-from-markdown":"i9FLz","./svgDraw-0fcc813d.js":"6Yaxn","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6Yaxn":[function(t,e,i){var r=t("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(i),r.export(i,"p",()=>l),r.export(i,"s",()=>p);var a=t("d3"),n=t("./mermaid-b0ad2de1.js");let s=0,d=function(t){let e=t.id;return t.type&&(e+="<"+t.type+">"),e},l=function(t){let e="",i="",r="",a="",s=t.substring(0,1),d=t.substring(t.length-1,t.length);s.match(/[#+~-]/)&&(a=s);let l=/[\s\w)~]/;d.match(l)||(i=c(d));let o=""===a?0:1,p=""===i?t.length:t.length-1;t=t.substring(o,p);let g=t.indexOf("("),h=t.indexOf(")"),u=g>1&&h>g&&h<=t.length;if(u){let s=t.substring(0,g).trim(),d=t.substring(g+1,h);if(e=a+s+"("+(0,n.x)(d.trim())+")",h<t.length){let a=t.substring(h+1,h+2);""!==i||a.match(l)?r=t.substring(h+1).trim():(i=c(a),r=t.substring(h+2).trim()),""!==r&&(":"===r.charAt(0)&&(r=r.substring(1).trim()),e+=r=" : "+(0,n.x)(r))}}else e=a+(0,n.x)(t);return{displayText:e,cssStyle:i}},o=function(t,e,i,r){let a=l(e),n=t.append("tspan").attr("x",r.padding).text(a.displayText);""!==a.cssStyle&&n.attr("style",a.cssStyle),i||n.attr("dy",r.textHeight)},c=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},p={getClassTitleString:d,drawClass:function(t,e,i,r){let a;(0,n.l).debug("Rendering class ",e,i);let s=e.id,l={id:s,label:e.id,width:0,height:0},c=t.append("g").attr("id",r.db.lookUpDomId(s)).attr("class","classGroup");a=e.link?c.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):c.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let p=!0;e.annotations.forEach(function(t){let e=a.append("tspan").text("\xab"+t+"\xbb");p||e.attr("dy",i.textHeight),p=!1});let g=d(e),h=a.append("tspan").text(g).attr("class","title");p||h.attr("dy",i.textHeight);let u=a.node().getBBox().height,f=c.append("line").attr("x1",0).attr("y1",i.padding+u+i.dividerMargin/2).attr("y2",i.padding+u+i.dividerMargin/2),x=c.append("text").attr("x",i.padding).attr("y",u+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");p=!0,e.members.forEach(function(t){o(x,t,p,i),p=!1});let y=x.node().getBBox(),b=c.append("line").attr("x1",0).attr("y1",i.padding+u+i.dividerMargin+y.height).attr("y2",i.padding+u+i.dividerMargin+y.height),m=c.append("text").attr("x",i.padding).attr("y",u+2*i.dividerMargin+y.height+i.textHeight).attr("fill","white").attr("class","classText");p=!0,e.methods.forEach(function(t){o(m,t,p,i),p=!1});let w=c.node().getBBox();var T=" ";e.cssClasses.length>0&&(T+=e.cssClasses.join(" "));let j=c.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",w.width+2*i.padding).attr("height",w.height+i.padding+.5*i.dividerMargin).attr("class",T),v=j.node().getBBox().width;return a.node().childNodes.forEach(function(t){t.setAttribute("x",(v-t.getBBox().width)/2)}),e.tooltip&&a.insert("title").text(e.tooltip),f.attr("x2",v),b.attr("x2",v),l.width=v,l.height=w.height+i.padding+.5*i.dividerMargin,l},drawEdge:function(t,e,i,r,d){let l,o,c,p,g,h;let u=function(t){switch(t){case d.db.relationType.AGGREGATION:return"aggregation";case d.db.relationType.EXTENSION:return"extension";case d.db.relationType.COMPOSITION:return"composition";case d.db.relationType.DEPENDENCY:return"dependency";case d.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(t=>!Number.isNaN(t.y));let f=e.points,x=(0,a.line)().x(function(t){return t.x}).y(function(t){return t.y}).curve(a.curveBasis),y=t.append("path").attr("d",x(f)).attr("id","edge"+s).attr("class","relation"),b="";r.arrowMarkerAbsolute&&(b=(b=(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==i.relation.lineType&&y.attr("class","relation dashed-line"),10==i.relation.lineType&&y.attr("class","relation dotted-line"),"none"!==i.relation.type1&&y.attr("marker-start","url("+b+"#"+u(i.relation.type1)+"Start)"),"none"!==i.relation.type2&&y.attr("marker-end","url("+b+"#"+u(i.relation.type2)+"End)");let m=e.points.length,w=(0,n.u).calcLabelPosition(e.points);if(l=w.x,o=w.y,m%2!=0&&m>1){let t=(0,n.u).calcCardinalityPosition("none"!==i.relation.type1,e.points,e.points[0]),r=(0,n.u).calcCardinalityPosition("none"!==i.relation.type2,e.points,e.points[m-1]);(0,n.l).debug("cardinality_1_point "+JSON.stringify(t)),(0,n.l).debug("cardinality_2_point "+JSON.stringify(r)),c=t.x,p=t.y,g=r.x,h=r.y}if(void 0!==i.title){let e=t.append("g").attr("class","classLabel"),a=e.append("text").attr("class","label").attr("x",l).attr("y",o).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=a;let n=a.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",n.x-r.padding/2).attr("y",n.y-r.padding/2).attr("width",n.width+r.padding).attr("height",n.height+r.padding)}if((0,n.l).info("Rendering relation "+JSON.stringify(i)),void 0!==i.relationTitle1&&"none"!==i.relationTitle1){let e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type1").attr("x",c).attr("y",p).attr("fill","black").attr("font-size","6").text(i.relationTitle1)}if(void 0!==i.relationTitle2&&"none"!==i.relationTitle2){let e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type2").attr("x",g).attr("y",h).attr("fill","black").attr("font-size","6").text(i.relationTitle2)}s++},drawNote:function(t,e,i,r){(0,n.l).debug("Rendering note ",e,i);let a=e.id,s={id:a,text:e.text,width:0,height:0},d=t.append("g").attr("id",a).attr("class","classGroup"),l=d.append("text").attr("y",i.textHeight+i.padding).attr("x",0),o=JSON.parse(`"${e.text}"`).split("\n");o.forEach(function(t){(0,n.l).debug(`Adding line: ${t}`),l.append("tspan").text(t).attr("class","title").attr("dy",i.textHeight)});let c=d.node().getBBox(),p=d.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*i.padding).attr("height",c.height+o.length*i.textHeight+i.padding+.5*i.dividerMargin),g=p.node().getBBox().width;return l.node().childNodes.forEach(function(t){t.setAttribute("x",(g-t.getBBox().width)/2)}),s.width=g,s.height=c.height+o.length*i.textHeight+i.padding+.5*i.dividerMargin,s},parseMember:l}},{d3:"ahWNw","./mermaid-b0ad2de1.js":"42V0c","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},[],null,"parcelRequire9da7")//# sourceMappingURL=stateDiagram-v2-6371a76b.2b4d1f12.js.map
;
//# sourceMappingURL=stateDiagram-v2-6371a76b.2b4d1f12.js.map
